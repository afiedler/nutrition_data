"use strict";angular.module("angularApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.select2"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("angularApp").controller("MainCtrl",["$scope","$http","$q",function(a,b,c){var d=function(a){var d=c.defer(),e=b.get("/api/foods",{params:a.data,timeout:d.promise}).then(a.success);return e.abort=function(){d.resolve()},e};a.foodSelectOptions={minimumInputLength:1,ajax:{data:function(a){return{short_desc:a}},transport:d,results:function(a){return{results:_.map(a.data.foods,function(a){return a.text=a.short_desc,a})}}},initSelection:function(a,c){var d=a.val();b.get("/api/foods/"+d).then(function(a){a.data.food&&(a.data.food.text=a.data.food.short_desc),c(a.data.food)})}},a.selectedFood=null,a.$watch("selectedFood",function(){a.selectedFood&&(a.weights=a.selectedFood.weights||[])})}]);